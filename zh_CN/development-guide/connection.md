# 数据库连接指南

## 概述

Datalayers 提供多种协议支持，满足不同场景下的数据库连接和交互需求。用户可根据性能要求、开发生态和集成复杂度等因素选择合适的连接协议。

## 支持的协议

### Arrow Flight SQL（推荐用于高性能场景）

- **协议特点**：基于 Apache Arrow 内存格式和 Flight RPC 框架的高性能 SQL 交互协议
- **性能优势**：在数据传输场景下，相比 JDBC/ODBC 等驱动数据传输方案，性能提升可达百倍
- **适用场景**：对性能有高要求的数据写入与查询场景

### PostgreSQL 协议（即将推出）

- **兼容性**：完整兼容 PostgreSQL 网络连接协议
- **工具生态**：支持 PostgreSQL 生态的命令行工具、JDBC/ODBC 驱动及各类可视化工具
- **当前状态**：该协议正在开发中，计划近期正式发布

### Prometheus 协议

- **兼容性**：兼容 `PromQL` 查询语言以及 `Remote-Write` 协议
- **工具生态**： 可使用 Prometheus 生态相关工具、组件快速集成

### REST API

- **交互方式**：通过标准的 RESTful API 接口执行 SQL 操作
- **适用场景**：适合需要 HTTP 协议集成的应用场景

### InfluxDB 行协议

- **功能特性**：专为时序数据写入优化的行协议
- **使用限制**：该协议仅支持数据写入操作
- **适用场景**：InfluxDB 兼容的时序数据摄入

## 协议选择建议

| 特性                                 |  适用场景                       |  功能支持           | 备注                 |
| -------------                        | -----------------------       | --------------------| -------------------  |
| **Arrow Flight SQL 高速传输协议**     | 高性能写入、查询与大数据量传输   | 完整读写            | 完整功能              |
| **PostgreSQL 连接协议**              | PostgreSQL 生态集成             | 完整读写            | 完整功能               |
| **Prometheus 连接协议**              | Prometheus 生态集成             | 完整读写            | Prometheus 为单值模型，使用上存在细微差异  |
| **REST API**                         | HTTP 集成、简单查询             | 完整读写            | 完整读写              |
| **InfluxDB 行协议**                  | 替换 InfluxDB 场景              | 仅支持写入          | 仅支持写入             |

## 推荐选择

- 对于性能敏感的生产环境，建议优先考虑 Arrow Flight SQL 协议
- 如需使用现有 PostgreSQL 工具链，可等待 PostgreSQL 协议正式发布
- 如需使用现有 Prometheus 工具链，可使用 Prometheus 协议
- 如需使用现有 InfluxDB 工具链写入，可使用 InfluxDB 行协议
- 如上述相关协议均不能满足的情况，可使用 REST API 协议
